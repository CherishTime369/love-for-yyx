/* --- 基础设定 --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
    /* 梦幻背景 */
    background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
    background: radial-gradient(circle at 10% 20%, rgb(255, 200, 210) 0%, rgb(255, 235, 240) 90%);
    height: 100vh;
    overflow: hidden;
    color: #444;
}

/* --- 进场 --- */
#welcome-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #fff5f7; z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    transition: opacity 0.8s;
}
.welcome-content { text-align: center; }
.heart-pulse { font-size: 80px; animation: pulse 1.5s infinite; margin-bottom: 20px; }
#enter-btn {
    padding: 15px 40px; background: #ff6b81; color: white;
    border: none; border-radius: 50px; font-size: 1.2rem; cursor: pointer;
    box-shadow: 0 5px 20px rgba(255, 107, 129, 0.4);
    transition: transform 0.2s;
}
#enter-btn:hover { transform: scale(1.1); background: #ff4757; }

/* --- 主容器 --- */
.container { display: flex; width: 100%; height: 100%; }

/* --- 左侧画廊 --- */
.gallery-side {
    flex: 0 0 62%; /* 稍微宽一点放这45张图 */
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    position: relative;
}
.header { position: absolute; top: 30px; left: 40px; }
.header h1 {
    font-family: 'Brush Script MT', cursive; font-size: 3.5rem; color: #ff4757;
    text-shadow: 2px 2px 0px white;
}
#timer {
    background: white; padding: 5px 15px; border-radius: 20px;
    font-size: 0.9rem; letter-spacing: 2px; color: #888; display: inline-block;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

/* 核心网格 */
.mosaic-wrapper {
    width: 800px; height: 700px;
    display: flex; justify-content: center; align-items: center;
    transform: scale(0.85); /* 适配屏幕 */
}
.mosaic-grid {
    display: grid;
    /* 10列布局，每列宽1fr */
    grid-template-columns: repeat(10, 1fr);
    /* 自动行高，每行约 60px */
    grid-auto-rows: 60px; 
    gap: 4px;
    width: 100%;
}

.photo-brick {
    position: relative; overflow: hidden; border-radius: 4px;
    cursor: pointer; opacity: 0.9; transition: all 0.3s ease;
    border: 2px solid transparent;
}
.photo-brick img { width: 100%; height: 100%; object-fit: cover; }

/* 三种积木形态 */
.brick-wide { grid-column: span 2; }       /* 16:9 横 */
.brick-tall { grid-row: span 2; }          /* 9:16 竖 */
.brick-sq   { grid-column: span 1; }       /* 4:3 方 */

/* 悬停/激活 */
.photo-brick:hover, .photo-brick.active {
    z-index: 10; transform: scale(1.15);
    opacity: 1; border-color: white;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

/* 占位符 (隐形) */
.spacer { pointer-events: none; }


/* --- 右侧预览 --- */
.preview-side {
    flex: 1; background: rgba(255,255,255,0.4);
    display: flex; justify-content: center; align-items: center;
    padding: 30px; backdrop-filter: blur(10px);
}
.preview-card {
    width: 100%; max-width: 500px; height: 80%;
    background: white; border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.1);
    display: flex; flex-direction: column;
    overflow: hidden; position: relative;
}

.img-box {
    flex: 1; position: relative; overflow: hidden; background: #000;
}
#main-img {
    width: 100%; height: 100%; object-fit: contain; /* 完整显示 */
    transition: opacity 0.2s;
}

/* 文字条 */
.caption-bar {
    padding: 20px; background: white;
    border-top: 1px solid #eee;
    transform: translateY(100%); transition: transform 0.3s ease;
    position: absolute; bottom: 0; left: 0; width: 100%;
}
.caption-bar.show { transform: translateY(0); position: relative; } /* 挤上来 */

.caption-info { color: #ff6b81; font-size: 0.8rem; font-weight: bold; margin-bottom: 8px; text-transform: uppercase; }
#c-text { font-size: 1rem; color: #555; line-height: 1.5; }

.guide-text {
    position: absolute; bottom: 20px; width: 100%; text-align: center;
    color: #ccc; font-size: 0.9rem; pointer-events: none;
    transition: opacity 0.3s;
}
.guide-text.hide { opacity: 0; }

/* 粒子 */
.particle {
    position: absolute; width: 8px; height: 8px; background: #ff4757;
    border-radius: 50%; pointer-events: none;
    animation: burst 0.6s forwards;
}
@keyframes burst { to { transform: translate(var(--x), var(--y)); opacity: 0; } }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } }

/* 响应式 */
@media (max-width: 1300px) {
    .mosaic-wrapper { width: 600px; height: 500px; }
    .mosaic-grid { grid-auto-rows: 45px; }
}