/* --- 全局设置 --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Helvetica Neue', Arial, sans-serif;
    background: #0f0f0f; /* 极简深黑背景 */
    color: white;
    height: 100vh;
    overflow: hidden;
}

/* --- 进场遮罩 --- */
#welcome-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    transition: transform 0.8s ease-in-out;
}
.welcome-box { text-align: center; }
.heart-icon { font-size: 80px; animation: beat 1s infinite; margin-bottom: 20px;}
#start-btn {
    padding: 12px 35px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.5);
    background: transparent; color: white; font-size: 16px; cursor: pointer;
    transition: all 0.3s;
}
#start-btn:hover { background: white; color: black; }

/* --- 主布局 --- */
.split-container {
    display: flex;
    width: 100%; height: 100%;
}

/* --- 左侧：心形墙 --- */
.left-panel {
    flex: 0 0 55%; /* 左侧占 55% */
    background: #111;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    position: relative;
    border-right: 1px solid #222;
}

.panel-header {
    position: absolute; top: 30px; left: 40px; z-index: 10;
}
.panel-header h1 {
    font-family: 'Times New Roman', serif; font-size: 2.5rem;
    background: linear-gradient(to right, #ff9a9e, #fecfef);
    -webkit-background-clip: text; color: transparent;
    margin-bottom: 10px;
}
.hint-text {
    position: absolute; bottom: 20px; color: #444; font-size: 0.8rem; letter-spacing: 1px;
}

/* 计时器样式 */
.odometer-box { display: flex; gap: 8px; font-family: 'Courier New', monospace; color: #888; }
.odo-group { display: flex; align-items: center; }
.odo-digit {
    width: 20px; height: 30px; background: #222; border-radius: 3px;
    overflow: hidden; position: relative; margin-right: 1px;
}
.odo-strip {
    position: absolute; top: 0; left: 0; width: 100%;
    display: flex; flex-direction: column;
    transition: transform 0.8s cubic-bezier(0.1, 1, 0.2, 1); /* 丝滑滚动 */
}
.odo-strip div { height: 30px; line-height: 30px; text-align: center; font-size: 18px; color: #eee; }
.odo-label { font-size: 12px; margin: 0 5px; color: #555; }

/* --- 心形 Grid (19张图布局) --- */
.heart-mosaic-wrapper {
    width: 600px; height: 500px;
    /* 核心：让心形在左侧面板居中 */
    display: flex; justify-content: center; align-items: center;
}
.heart-mosaic {
    display: grid;
    /* 6列 x 6行 */
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: repeat(6, 1fr);
    gap: 6px;
    width: 100%; height: 100%;
}
.heart-item {
    position: relative; overflow: hidden; border-radius: 4px;
    cursor: pointer; opacity: 0.5; filter: grayscale(80%);
    transition: all 0.4s ease;
}
/* 选中或悬停状态：高亮、彩色、放大 */
.heart-item:hover, .heart-item.active {
    opacity: 1; filter: grayscale(0%);
    transform: scale(1.05); z-index: 20;
    box-shadow: 0 0 20px rgba(255, 71, 87, 0.4);
    border: 2px solid #ff4757;
}
.heart-item img { width: 100%; height: 100%; object-fit: cover; }

/* Grid 区域定义 (保持原计划，因为4:3也可适配方格) */
/* 行 1 */
.pos-1 { grid-column: 2 / 3; grid-row: 1 / 2; }
.pos-2 { grid-column: 3 / 4; grid-row: 1 / 2; }
.pos-3 { grid-column: 4 / 5; grid-row: 1 / 2; }
.pos-4 { grid-column: 5 / 6; grid-row: 1 / 2; }
/* 行 2 (宽) */
.pos-5 { grid-column: 1 / 3; grid-row: 2 / 3; }
.pos-6 { grid-column: 3 / 5; grid-row: 2 / 3; }
.pos-7 { grid-column: 5 / 7; grid-row: 2 / 3; }
/* 行 3 (宽) */
.pos-8 { grid-column: 1 / 3; grid-row: 3 / 4; }
.pos-9 { grid-column: 3 / 5; grid-row: 3 / 4; }
.pos-10 { grid-column: 5 / 7; grid-row: 3 / 4; }
/* 行 4 (宽) */
.pos-11 { grid-column: 2 / 4; grid-row: 4 / 5; }
.pos-12 { grid-column: 4 / 6; grid-row: 4 / 5; }
/* 行 5 (普通) */
.pos-13 { grid-column: 2 / 3; grid-row: 5 / 6; }
.pos-14 { grid-column: 3 / 4; grid-row: 5 / 6; }
.pos-15 { grid-column: 4 / 5; grid-row: 5 / 6; }
.pos-16 { grid-column: 5 / 6; grid-row: 5 / 6; }
/* 行 6 (尖) */
.pos-17 { grid-column: 3 / 5; grid-row: 6 / 7; }

/* --- 右侧：统一视窗 --- */
.right-panel {
    flex: 1; /* 占剩余空间 (45%) */
    background: #050505;
    display: flex; justify-content: center; align-items: center;
    padding: 40px;
}
.viewer-container {
    position: relative;
    width: 100%; max-width: 600px; /* 限制最大宽 */
    height: 500px; /* 限制高度，与左侧心形近似 */
    border-radius: 12px;
    overflow: hidden;
    background: #000;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    opacity: 0; transform: translateY(20px);
    transition: all 0.5s ease;
}
.viewer-container.visible { opacity: 1; transform: translateY(0); }

/* 图片样式：关键改动 */
.viewer-container img {
    width: 100%; height: 100%;
    /* contain: 完整显示图片，会有黑边 */
    /* cover: 充满容器，会裁切 */
    /* 建议用 contain 保证 16:9 和 4:3 都能看全 */
    object-fit: contain; 
}

/* 底部蒙版文字 */
.view-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%;
    padding: 80px 30px 30px; /* 上方 padding 给渐变留空间 */
    background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.6) 50%, transparent);
    color: white;
    text-align: left;
}
.view-meta { color: #ff6b81; font-size: 0.9rem; margin-bottom: 8px; font-weight: bold; letter-spacing: 1px; }
.view-meta .sep { color: #555; margin: 0 8px; }
.view-overlay p { font-size: 1.1rem; line-height: 1.6; color: #eee; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }

/* --- 手机端适配 --- */
@media (max-width: 768px) {
    .split-container { flex-direction: column-reverse; }
    
    /* 手机上心形在底部 */
    .left-panel { flex: 0 0 50%; border-right: none; border-top: 1px solid #222; padding: 20px 0; }
    .heart-mosaic-wrapper { transform: scale(0.65); height: auto; margin-top: -50px; }
    .panel-header { position: absolute; top: 10px; left: 0; width: 100%; text-align: center; }
    .panel-header h1 { font-size: 1.5rem; }
    .odometer-box { justify-content: center; }
    .hint-text { display: none; }

    /* 手机上视窗在顶部 */
    .right-panel { flex: 0 0 50%; padding: 10px; }
    .viewer-container { height: 100%; border-radius: 0; }
    .view-overlay { padding: 40px 20px 20px; }
    .view-overlay p { font-size: 1rem; }
}

@keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }